{"ast":null,"code":"var _jsxFileName = \"/home/trevor/projects/pos-frontend/src/components/menu/Modify.js\",\n    _s = $RefreshSig$();\n\nimport { menuState } from '../state/Atoms';\nimport { useRecoilState } from 'recoil';\nimport { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Modify(_ref) {\n  _s();\n\n  let {\n    categories,\n    db\n  } = _ref;\n  const [menu, setMenuState] = useRecoilState(menuState);\n  const optionsArray = [];\n  useEffect(() => {\n    validate(currentItems, requiredItems);\n    checkRequired();\n  });\n  const {\n    currentCategory,\n    currentItems,\n    selection,\n    pending,\n    active,\n    requiredItems,\n    prevRequired\n  } = menu;\n\n  for (const item of db) {\n    if (item.menu === 'modify') {\n      for (const addon of item.addons) {\n        if (addon.category === currentCategory) {\n          optionsArray.push(addon);\n        }\n      }\n    }\n  }\n\n  const next = () => {\n    const numItems = requiredItems.length;\n    console.log(numItems);\n  };\n\n  const checkRequired = item => {\n    console.log(currentItems);\n\n    for (const option of selection.options) {\n      const num = currentItems.filter(x => x === option.category).length;\n\n      if (currentCategory === option.category && option.num === num) {\n        for (const required of requiredItems) {\n          next();\n          console.log(required);\n        }\n\n        return true;\n      }\n    }\n  };\n\n  const validate = (a, b) => {\n    if (a.length !== b.length) return false;\n    const uniqueValues = new Set([...a, ...b]);\n\n    for (const v of uniqueValues) {\n      const aCount = a.filter(e => e === v).length;\n      const bCount = b.filter(e => e === v).length;\n      if (aCount !== bCount) return false;\n    }\n\n    setMenuState({ ...menu,\n      isSelected: false,\n      selection: {},\n      currentCategory: 'Burgers',\n      currentItems: [],\n      requiredItems: []\n    });\n  };\n\n  const displayModify = () => {\n    return optionsArray.map((item, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => addItem(item),\n      className: \"menu_item\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menuItemText\",\n        children: item.food\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this)\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 16\n    }, this));\n  };\n\n  const addItem = item => {\n    if (!checkRequired()) {\n      setMenuState({ ...menu,\n        pending: { ...menu.pending,\n          modify: [...menu.pending.modify, item]\n        },\n        currentItems: [...currentItems, item.category]\n      });\n    }\n  };\n\n  return displayModify();\n}\n\n_s(Modify, \"unNJmmua7GEKybpJiSokSlEIEic=\", false, function () {\n  return [useRecoilState];\n});\n\n_c = Modify;\nexport default Modify;\n\nvar _c;\n\n$RefreshReg$(_c, \"Modify\");","map":{"version":3,"sources":["/home/trevor/projects/pos-frontend/src/components/menu/Modify.js"],"names":["menuState","useRecoilState","useEffect","Modify","categories","db","menu","setMenuState","optionsArray","validate","currentItems","requiredItems","checkRequired","currentCategory","selection","pending","active","prevRequired","item","addon","addons","category","push","next","numItems","length","console","log","option","options","num","filter","x","required","a","b","uniqueValues","Set","v","aCount","e","bCount","isSelected","displayModify","map","i","addItem","food","modify"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,gBAA1B;AACA,SAASC,cAAT,QAA+B,QAA/B;AACA,SAASC,SAAT,QAA0B,OAA1B;;;AAEA,SAASC,MAAT,OAAoC;AAAA;;AAAA,MAApB;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,GAAoB;AAC/B,QAAM,CAACC,IAAD,EAAOC,YAAP,IAAuBN,cAAc,CAACD,SAAD,CAA3C;AACA,QAAMQ,YAAY,GAAG,EAArB;AAEAN,EAAAA,SAAS,CAAC,MAAM;AACXO,IAAAA,QAAQ,CAACC,YAAD,EAAeC,aAAf,CAAR;AACAC,IAAAA,aAAa;AACjB,GAHQ,CAAT;AAKA,QAAM;AACDC,IAAAA,eADC;AAEDH,IAAAA,YAFC;AAGDI,IAAAA,SAHC;AAIDC,IAAAA,OAJC;AAKDC,IAAAA,MALC;AAMDL,IAAAA,aANC;AAODM,IAAAA;AAPC,MAQFX,IARJ;;AAUA,OAAK,MAAMY,IAAX,IAAmBb,EAAnB,EAAuB;AAClB,QAAIa,IAAI,CAACZ,IAAL,KAAc,QAAlB,EAA4B;AACvB,WAAK,MAAMa,KAAX,IAAoBD,IAAI,CAACE,MAAzB,EAAiC;AAC5B,YAAID,KAAK,CAACE,QAAN,KAAmBR,eAAvB,EAAwC;AACnCL,UAAAA,YAAY,CAACc,IAAb,CAAkBH,KAAlB;AACJ;AACL;AACL;AACL;;AAED,QAAMI,IAAI,GAAG,MAAM;AACd,UAAMC,QAAQ,GAAGb,aAAa,CAACc,MAA/B;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACJ,GAHD;;AAKA,QAAMZ,aAAa,GAAIM,IAAD,IAAU;AAC3BQ,IAAAA,OAAO,CAACC,GAAR,CAAYjB,YAAZ;;AACA,SAAK,MAAMkB,MAAX,IAAqBd,SAAS,CAACe,OAA/B,EAAwC;AACnC,YAAMC,GAAG,GAAGpB,YAAY,CAACqB,MAAb,CACNC,CAAD,IAAOA,CAAC,KAAKJ,MAAM,CAACP,QADb,EAEVI,MAFF;;AAGA,UAAIZ,eAAe,KAAKe,MAAM,CAACP,QAA3B,IAAuCO,MAAM,CAACE,GAAP,KAAeA,GAA1D,EAA+D;AAC1D,aAAK,MAAMG,QAAX,IAAuBtB,aAAvB,EAAsC;AACjCY,UAAAA,IAAI;AACJG,UAAAA,OAAO,CAACC,GAAR,CAAYM,QAAZ;AACJ;;AACD,eAAO,IAAP;AACJ;AACL;AACL,GAdD;;AAgBA,QAAMxB,QAAQ,GAAG,CAACyB,CAAD,EAAIC,CAAJ,KAAU;AACtB,QAAID,CAAC,CAACT,MAAF,KAAaU,CAAC,CAACV,MAAnB,EAA2B,OAAO,KAAP;AAC3B,UAAMW,YAAY,GAAG,IAAIC,GAAJ,CAAQ,CAAC,GAAGH,CAAJ,EAAO,GAAGC,CAAV,CAAR,CAArB;;AACA,SAAK,MAAMG,CAAX,IAAgBF,YAAhB,EAA8B;AACzB,YAAMG,MAAM,GAAGL,CAAC,CAACH,MAAF,CAAUS,CAAD,IAAOA,CAAC,KAAKF,CAAtB,EAAyBb,MAAxC;AACA,YAAMgB,MAAM,GAAGN,CAAC,CAACJ,MAAF,CAAUS,CAAD,IAAOA,CAAC,KAAKF,CAAtB,EAAyBb,MAAxC;AACA,UAAIc,MAAM,KAAKE,MAAf,EAAuB,OAAO,KAAP;AAC3B;;AACDlC,IAAAA,YAAY,CAAC,EACR,GAAGD,IADK;AAERoC,MAAAA,UAAU,EAAE,KAFJ;AAGR5B,MAAAA,SAAS,EAAE,EAHH;AAIRD,MAAAA,eAAe,EAAE,SAJT;AAKRH,MAAAA,YAAY,EAAE,EALN;AAMRC,MAAAA,aAAa,EAAE;AANP,KAAD,CAAZ;AAQJ,GAhBD;;AAkBA,QAAMgC,aAAa,GAAG,MAAM;AACvB,WAAOnC,YAAY,CAACoC,GAAb,CAAiB,CAAC1B,IAAD,EAAO2B,CAAP,kBACnB;AAAK,MAAA,OAAO,EAAE,MAAMC,OAAO,CAAC5B,IAAD,CAA3B;AAA2C,MAAA,SAAS,EAAC,WAArD;AAAA,6BACK;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,kBAA+BA,IAAI,CAAC6B;AAApC;AAAA;AAAA;AAAA;AAAA;AADL,OAAwCF,CAAxC;AAAA;AAAA;AAAA;AAAA,YADE,CAAP;AAKJ,GAND;;AAQA,QAAMC,OAAO,GAAI5B,IAAD,IAAU;AACrB,QAAI,CAACN,aAAa,EAAlB,EAAsB;AACjBL,MAAAA,YAAY,CAAC,EACR,GAAGD,IADK;AAERS,QAAAA,OAAO,EAAE,EACJ,GAAGT,IAAI,CAACS,OADJ;AAEJiC,UAAAA,MAAM,EAAE,CAAC,GAAG1C,IAAI,CAACS,OAAL,CAAaiC,MAAjB,EAAyB9B,IAAzB;AAFJ,SAFD;AAMRR,QAAAA,YAAY,EAAE,CAAC,GAAGA,YAAJ,EAAkBQ,IAAI,CAACG,QAAvB;AANN,OAAD,CAAZ;AAQJ;AACL,GAXD;;AAaA,SAAOsB,aAAa,EAApB;AACJ;;GA1FQxC,M;UACyBF,c;;;KADzBE,M;AA4FT,eAAeA,MAAf","sourcesContent":["import { menuState } from '../state/Atoms';\nimport { useRecoilState } from 'recoil';\nimport { useEffect } from 'react';\n\nfunction Modify({ categories, db }) {\n     const [menu, setMenuState] = useRecoilState(menuState);\n     const optionsArray = [];\n\n     useEffect(() => {\n          validate(currentItems, requiredItems);\n          checkRequired();\n     });\n\n     const {\n          currentCategory,\n          currentItems,\n          selection,\n          pending,\n          active,\n          requiredItems,\n          prevRequired,\n     } = menu;\n\n     for (const item of db) {\n          if (item.menu === 'modify') {\n               for (const addon of item.addons) {\n                    if (addon.category === currentCategory) {\n                         optionsArray.push(addon);\n                    }\n               }\n          }\n     }\n\n     const next = () => {\n          const numItems = requiredItems.length;\n          console.log(numItems);\n     };\n\n     const checkRequired = (item) => {\n          console.log(currentItems);\n          for (const option of selection.options) {\n               const num = currentItems.filter(\n                    (x) => x === option.category\n               ).length;\n               if (currentCategory === option.category && option.num === num) {\n                    for (const required of requiredItems) {\n                         next();\n                         console.log(required);\n                    }\n                    return true;\n               }\n          }\n     };\n\n     const validate = (a, b) => {\n          if (a.length !== b.length) return false;\n          const uniqueValues = new Set([...a, ...b]);\n          for (const v of uniqueValues) {\n               const aCount = a.filter((e) => e === v).length;\n               const bCount = b.filter((e) => e === v).length;\n               if (aCount !== bCount) return false;\n          }\n          setMenuState({\n               ...menu,\n               isSelected: false,\n               selection: {},\n               currentCategory: 'Burgers',\n               currentItems: [],\n               requiredItems: [],\n          });\n     };\n\n     const displayModify = () => {\n          return optionsArray.map((item, i) => (\n               <div onClick={() => addItem(item)} key={i} className='menu_item'>\n                    <div className='menuItemText'>{item.food}</div>\n               </div>\n          ));\n     };\n\n     const addItem = (item) => {\n          if (!checkRequired()) {\n               setMenuState({\n                    ...menu,\n                    pending: {\n                         ...menu.pending,\n                         modify: [...menu.pending.modify, item],\n                    },\n                    currentItems: [...currentItems, item.category],\n               });\n          }\n     };\n\n     return displayModify();\n}\n\nexport default Modify;\n"]},"metadata":{},"sourceType":"module"}